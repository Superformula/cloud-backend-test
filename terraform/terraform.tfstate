{
  "version": 4,
  "terraform_version": "0.15.3",
  "serial": 9,
  "lineage": "59a12c80-e366-1195-03e2-0e26b93b266a",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "450001857077",
            "arn": "arn:aws:iam::450001857077:user/super-formula",
            "id": "450001857077",
            "user_id": "AIDAWRRRTNI2T3V2KU4KL"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "managed",
      "type": "aws_appsync_api_key",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "pmbwakd36fgd7kvla2jn7565sm",
            "description": "Managed by Terraform",
            "expires": "2022-01-01T04:00:00Z",
            "id": "pmbwakd36fgd7kvla2jn7565sm:da2-d4yav3faungatg7x7sksyznzsy",
            "key": "da2-d4yav3faungatg7x7sksyznzsy"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.appsync.aws_appsync_graphql_api.this"
          ]
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "managed",
      "type": "aws_appsync_datasource",
      "name": "dynamo-table",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "pmbwakd36fgd7kvla2jn7565sm",
            "arn": "arn:aws:appsync:us-east-1:450001857077:apis/pmbwakd36fgd7kvla2jn7565sm/datasources/appSync_dynamo_source",
            "description": "",
            "dynamodb_config": [
              {
                "region": "us-east-1",
                "table_name": "our-dynamo-table",
                "use_caller_credentials": false
              }
            ],
            "elasticsearch_config": [],
            "http_config": [],
            "id": "pmbwakd36fgd7kvla2jn7565sm-appSync_dynamo_source",
            "lambda_config": [],
            "name": "appSync_dynamo_source",
            "service_role_arn": "arn:aws:iam::450001857077:role/appSyncAllowRole",
            "type": "AMAZON_DYNAMODB"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.appsync.aws_appsync_graphql_api.this",
            "module.appsync.aws_iam_role.iam_role",
            "module.dynamo.aws_dynamodb_table.this"
          ]
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "managed",
      "type": "aws_appsync_graphql_api",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "additional_authentication_provider": [
              {
                "authentication_type": "AWS_IAM",
                "openid_connect_config": [],
                "user_pool_config": []
              }
            ],
            "arn": "arn:aws:appsync:us-east-1:450001857077:apis/pmbwakd36fgd7kvla2jn7565sm",
            "authentication_type": "API_KEY",
            "id": "pmbwakd36fgd7kvla2jn7565sm",
            "log_config": [],
            "name": "our-graphql",
            "openid_connect_config": [],
            "schema": "type UserModel {\r\n\tpk: String!\r\n\tsk: String!\r\n\tdob: String\r\n\taddress: String\r\n\timageUrl: String!\r\n\tcreatedAt: String!\r\n\tupdatedAt: String\r\n\tdescription: String\r\n}\r\n\r\ninput CreateUserModelInput {\r\n\tpk: String!\r\n\tsk: String!\r\n\tdob: String\r\n\taddress: String\r\n\timageUrl: String!\r\n\tdescription: String\r\n}\r\n\r\ninput UpdateUserModelInput {\r\n\tpk: String!\r\n\tsk: String!\r\n\tdob: String\r\n\taddress: String\r\n\timageUrl: String!\r\n\tupdatedAt: String\r\n\tdescription: String\r\n}\r\n\r\ntype Mutation {\r\n\tcreateUserModel(input: CreateUserModelInput!): UserModel\r\n\tupdateUserModel(input: UpdateUserModelInput!): UserModel\r\n}\r\n\r\ntype Query {\r\n\tgetItem(pk: String!, sk: String!): UserModel\r\n\tlistUsers(pk: String!, limit: Int, nextToken: String): UserModelConnection\r\n}\r\n\r\ntype UserModelConnection {\r\n\titems: [UserModel]\r\n\tnextToken: String\r\n}",
            "tags": null,
            "tags_all": {},
            "uris": {
              "GRAPHQL": "https://d2jlddxf25dexdnpnjc3sewluu.appsync-api.us-east-1.amazonaws.com/graphql",
              "REALTIME": "wss://d2jlddxf25dexdnpnjc3sewluu.appsync-realtime-api.us-east-1.amazonaws.com/graphql"
            },
            "user_pool_config": [],
            "xray_enabled": false
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "managed",
      "type": "aws_appsync_resolver",
      "name": "getItem",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "pmbwakd36fgd7kvla2jn7565sm",
            "arn": "arn:aws:appsync:us-east-1:450001857077:apis/pmbwakd36fgd7kvla2jn7565sm/types/Query/resolvers/getItem",
            "caching_config": [],
            "data_source": "appSync_dynamo_source",
            "field": "getItem",
            "id": "pmbwakd36fgd7kvla2jn7565sm-Query-getItem",
            "kind": "UNIT",
            "pipeline_config": [],
            "request_template": "{\r\n  \"version\": \"2017-02-28\",\r\n  \"operation\": \"GetItem\",\r\n  \"key\": {\r\n    \"pk\": $util.dynamodb.toDynamoDBJson($ctx.args.pk),\r\n    \"sk\": $util.dynamodb.toDynamoDBJson($ctx.args.sk),\r\n  },\r\n}",
            "response_template": "$util.toJson($context.result)",
            "type": "Query"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.appsync.aws_appsync_datasource.dynamo-table",
            "module.appsync.aws_appsync_graphql_api.this",
            "module.appsync.aws_iam_role.iam_role",
            "module.dynamo.aws_dynamodb_table.this"
          ]
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "managed",
      "type": "aws_appsync_resolver",
      "name": "listUsers",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "pmbwakd36fgd7kvla2jn7565sm",
            "arn": "arn:aws:appsync:us-east-1:450001857077:apis/pmbwakd36fgd7kvla2jn7565sm/types/Query/resolvers/listUsers",
            "caching_config": [],
            "data_source": "appSync_dynamo_source",
            "field": "listUsers",
            "id": "pmbwakd36fgd7kvla2jn7565sm-Query-listUsers",
            "kind": "UNIT",
            "pipeline_config": [],
            "request_template": "{\r\n    \"version\" : \"2017-02-28\",\r\n    \"operation\" : \"Query\",\r\n    \"query\" : {\r\n        \"expression\": \"pk = :pk\",\r\n        \"expressionValues\" : {\r\n            \":pk\" : {\r\n                \"S\" : \"${ctx.args.pk}\"\r\n            }\r\n        }\r\n    },\r\n    \r\n    \"limit\": $util.defaultIfNull(${ctx.args.limit}, 6),\r\n    \"nextToken\": $util.toJson($util.defaultIfNullOrBlank($ctx.args.nextToken, null))\r\n}",
            "response_template": "$util.toJson($ctx.result)",
            "type": "Query"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.appsync.aws_appsync_datasource.dynamo-table",
            "module.appsync.aws_appsync_graphql_api.this",
            "module.appsync.aws_iam_role.iam_role",
            "module.dynamo.aws_dynamodb_table.this"
          ]
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "iam_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::450001857077:role/appSyncAllowRole",
            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"appsync.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
            "create_date": "2021-05-19T10:20:23Z",
            "description": "",
            "force_detach_policies": false,
            "id": "appSyncAllowRole",
            "inline_policy": [
              {
                "name": "",
                "policy": ""
              }
            ],
            "managed_policy_arns": [],
            "max_session_duration": 3600,
            "name": "appSyncAllowRole",
            "name_prefix": null,
            "path": "/",
            "permissions_boundary": null,
            "tags": null,
            "tags_all": {},
            "unique_id": "AROAWRRRTNI22DLOPB3S2"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.appsync",
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "role_policy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "appSyncAllowRole:appSyncAllowRole_policy",
            "name": "appSyncAllowRole_policy",
            "name_prefix": null,
            "policy": "{\"Statement\":[{\"Action\":[\"dynamodb:*\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:dynamodb:us-east-1:450001857077:table/our-dynamo-table\"]}],\"Version\":\"2012-10-17\"}",
            "role": "appSyncAllowRole"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.appsync.aws_iam_role.iam_role",
            "module.dynamo.aws_dynamodb_table.this"
          ]
        }
      ]
    },
    {
      "module": "module.dynamo",
      "mode": "managed",
      "type": "aws_dynamodb_table",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:dynamodb:us-east-1:450001857077:table/our-dynamo-table",
            "attribute": [
              {
                "name": "pk",
                "type": "S"
              },
              {
                "name": "sk",
                "type": "S"
              }
            ],
            "billing_mode": "PROVISIONED",
            "global_secondary_index": [],
            "hash_key": "pk",
            "id": "our-dynamo-table",
            "local_secondary_index": [],
            "name": "our-dynamo-table",
            "point_in_time_recovery": [
              {
                "enabled": false
              }
            ],
            "range_key": "sk",
            "read_capacity": 3,
            "replica": [],
            "server_side_encryption": [],
            "stream_arn": "",
            "stream_enabled": false,
            "stream_label": "",
            "stream_view_type": "",
            "tags": null,
            "tags_all": {},
            "timeouts": null,
            "ttl": [
              {
                "attribute_name": "",
                "enabled": false,
                "kms_key_arn": ""
              }
            ],
            "write_capacity": 5
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAwLCJkZWxldGUiOjYwMDAwMDAwMDAwMCwidXBkYXRlIjozNjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0="
        }
      ]
    }
  ]
}
